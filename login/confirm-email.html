<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Email Confirmation - Skreenit</title>
    
    <script>
        (function() {
            const isLocal = ['localhost', '127.0.0.1',''].includes(window.location.hostname);
            // Notice the '../assets' here because these files are one folder deep
            const assetsBase = isLocal ? '../assets' : 'https://assets.skreenit.com';
            const im = document.createElement('script');
            im.type = 'importmap';
            im.textContent = JSON.stringify({ imports: { "@shared/": `${assetsBase}/assets/` } });
            document.head.appendChild(im);
            
            // CACHE-BUSTER LOADER
            window.loadSharedCSS = function(file) {
                const link = document.createElement('link'); 
                link.rel = 'stylesheet'; 
                // Appends the current timestamp to force a fresh download
                link.href = `${assetsBase}/assets/css/${file}?v=` + new Date().getTime(); 
                document.head.appendChild(link);
            };
            
            const icon = document.createElement('link'); 
            icon.rel = 'icon'; 
            icon.href = `${assetsBase}/assets/images/favicon-32x32.png`; 
            document.head.appendChild(icon);
        })();
    </script>
    <script>
        loadSharedCSS('core.css');       // Tokens, Colors, Utility classes
        loadSharedCSS('components.css'); // Form inputs, Buttons
        loadSharedCSS('auth.css');       // Auth Card layout, Floating circles
        loadSharedCSS('mobile.css');
    </script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
</head>

<body class="auth-page-body">

<a href="https://www.skreenit.com" id="homeLink" class="logo-link">
  <img id="logoImg" alt="Skreenit Logo" />
</a>

<div class="auth-wrapper animate-slideInScale">
  
  <div class="auth-header has-image">
    <img id="brandImg" class="auth-header-img" alt="Skreenit Brand" />
  </div>

  <div class="auth-body">
    
    <div class="auth-title">
      <h1><i class="fas fa-check-circle"></i> <span id="pageTitle">Confirming Your Email...</span></h1>
      <p id="subtitle">Please wait while we confirm your email address...</p>
    </div>

    <div id="errorBox" class="alert alert-error d-none"></div>

    <!-- Status Icons -->
    <div class="text-center mb-4">
        <div class="loading-icon" id="loadingIcon">
            <i class="fas fa-spinner fa-spin fa-3x text-primary"></i>
        </div>
        <div class="success-icon" id="successIcon" style="display: none;">
            <i class="fas fa-check-circle fa-3x text-success"></i>
        </div>
        <div class="error-icon" id="errorIcon" style="display: none;">
            <i class="fas fa-exclamation-circle fa-3x text-danger"></i>
        </div>
    </div>

    <!-- Status Message -->
    <div id="message" class="text-center mb-4">
        <p class="text-muted">Securing your account with email verification...</p>
    </div>

    <!-- Action Button -->
    <a id="loginBtn" href="login.html" class="btn btn-primary btn-large w-100 mt-3" style="display: none;">
        <i class="fas fa-sign-in-alt"></i> Proceed to Login
    </a>

    <!-- Redirect Timer -->
    <div id="redirectTimer" class="text-center mt-3" style="display: none;">
        <i class="fas fa-clock"></i>
        Redirecting to login in <span id="countdown">5</span> seconds...
    </div>

    <!-- Footer Messages -->
    <div class="auth-footer mt-4">
        <div id="successFooter" style="display: none;">
            <div class="alert alert-success">
                <i class="fas fa-check-circle"></i> <strong>Email Successfully Confirmed!</strong><br>
                Your account has been activated and is ready to use.<br>
                You can now login and access your Skreenit dashboard.
            </div>
        </div>
        <div id="errorFooter" style="display: none;">
            <div class="alert alert-warning">
                <i class="fas fa-exclamation-triangle"></i> <strong>Confirmation Issue</strong><br>
                If you continue to experience issues, please contact support.
            </div>
        </div>
        <div id="loadingFooter">
            <p class="text-muted small">
                <i class="fas fa-lock"></i> This process usually takes just a few seconds.
            </p>
        </div>
    </div>

    <!-- Help Section -->
    <div class="auth-actions">
        <a href="login.html">Back to Login</a>
        <a href="#" id="resendLink">Resend Confirmation</a>
    </div>
    
  </div>
</div>


<script type="module" src="js/confirm-email.js"></script>
</body>
</html>